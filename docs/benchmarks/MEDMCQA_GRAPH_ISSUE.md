# MedMCQA å›¾ç´¢å¼•é—®é¢˜è¯´æ˜

## ğŸ” é—®é¢˜å‘ç°

å½“å‰è¿è¡Œçš„ MedMCQA æµ‹è¯•æ­£åœ¨åˆ›å»ºä¸€ä¸ª**æ–°çš„ 10k chunks å›¾**ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç°æœ‰çš„ **50k chunks å›¾**ã€‚

## ğŸ“Š ç›®å½•ç»“æ„

```
import/
â”œâ”€â”€ pubmed_mirage_medqa/          â† ç°æœ‰çš„ 50k å›¾ï¼ˆMedQA ä½¿ç”¨ï¼‰
â”‚   â”œâ”€â”€ passage_embedding.parquet (254MB, 49,999æ¡)
â”‚   â”œâ”€â”€ entity_embedding.parquet  (976MB, 212,532ä¸ªå®ä½“)
â”‚   â””â”€â”€ sentence_embedding.parquet (1.3GB, 279,428ä¸ªå¥å­)
â”‚
â””â”€â”€ pubmed_mirage_medmcqa/        â† æ­£åœ¨åˆ›å»ºçš„ 10k å›¾ï¼ˆMedMCQA ä½¿ç”¨ï¼‰
    â””â”€â”€ passage_embedding.parquet (52MB, çº¦10,000æ¡)
```

## âš™ï¸ åŸå› åˆ†æ

**è·¯å¾„ç”Ÿæˆé€»è¾‘** (run.py ç¬¬632è¡Œ):
```python
if args.use_mirage:
    dataset_path = f"{args.dataset_name}_mirage_{'_'.join(args.mirage_dataset)}"
    # medqa  â†’ pubmed_mirage_medqa
    # medmcqa â†’ pubmed_mirage_medmcqa  â† ä¸åŒçš„ç›®å½•ï¼
```

**å½±å“**:
- âœ… MedQA: ä½¿ç”¨ `pubmed_mirage_medqa/` (50k chunks, 21ä¸‡å®ä½“)
- âŒ MedMCQA: ä½¿ç”¨ `pubmed_mirage_medmcqa/` (10k chunks, æ­£åœ¨æ„å»º)

## ğŸ“ˆ å›¾è§„æ¨¡å¯¹æ¯”

| æŒ‡æ ‡ | 50k å›¾ (MedQA) | 10k å›¾ (MedMCQA) |
|------|---------------|-----------------|
| Passages | 49,999 | ~10,000 |
| Entities | 212,532 | ~42,000 (é¢„ä¼°) |
| Sentences | 279,428 | ~56,000 (é¢„ä¼°) |
| æ£€ç´¢è´¨é‡ | **æ›´å¥½** | è¾ƒå·® |
| æ„å»ºæ—¶é—´ | å·²å®Œæˆ | éœ€è¦ 20-30 åˆ†é’Ÿ |

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: ä½¿ç”¨ç°æœ‰ 50k å›¾ï¼ˆæ¨èï¼‰

**ä¼˜ç‚¹**:
- âœ… ä¸éœ€è¦é‡æ–°æ„å»ºå›¾
- âœ… æ£€ç´¢æ•ˆæœæ›´å¥½ï¼ˆå®ä½“æ•°é‡å¤š5å€ï¼‰
- âœ… èŠ‚çœæ—¶é—´ï¼ˆç«‹å³å¼€å§‹æµ‹è¯•ï¼‰
- âœ… ä¸ MedQA æµ‹è¯•å¯å¯¹æ¯”

**å®ç°**:
```bash
# 1. ç»ˆæ­¢å½“å‰æµ‹è¯•
kill 3840200

# 2. åˆ é™¤æ–°å»ºçš„ 10k å›¾
rm -rf import/pubmed_mirage_medmcqa

# 3. åˆ›å»ºç¬¦å·é“¾æ¥ï¼Œå¤ç”¨ 50k å›¾
ln -s pubmed_mirage_medqa import/pubmed_mirage_medmcqa

# 4. é‡æ–°å¯åŠ¨æµ‹è¯•
./run_medmcqa_use_50k.sh
```

### æ–¹æ¡ˆ 2: ç»§ç»­ä½¿ç”¨ 10k å›¾

**ç¼ºç‚¹**:
- âŒ éœ€è¦ç­‰å¾…å›¾æ„å»ºå®Œæˆï¼ˆè¿˜éœ€çº¦ 20-30 åˆ†é’Ÿï¼‰
- âŒ æ£€ç´¢æ•ˆæœå¯èƒ½è¾ƒå·®ï¼ˆå®ä½“æ•°é‡å°‘ï¼‰
- âŒ ä¸ MedQA æµ‹è¯•ä¸å¯å¯¹æ¯”

**å¦‚æœé€‰æ‹©ç»§ç»­**:
- ç­‰å¾… NER å¤„ç†å®Œæˆ
- é¢„è®¡æ€»æ—¶é—´: æ„å»º 30åˆ†é’Ÿ + æµ‹è¯• 2å°æ—¶ = 2.5å°æ—¶

## ğŸ’¡ å»ºè®®

**å¼ºçƒˆå»ºè®®ä½¿ç”¨æ–¹æ¡ˆ1ï¼ˆä½¿ç”¨ 50k å›¾ï¼‰**:

1. **ä¸€è‡´æ€§**: MedQA å’Œ MedMCQA éƒ½ä½¿ç”¨åŒä¸€ä¸ªå›¾ï¼Œç»“æœå¯å¯¹æ¯”
2. **æ•ˆç‡**: è·³è¿‡å›¾æ„å»ºï¼Œç«‹å³å¼€å§‹æµ‹è¯•
3. **è´¨é‡**: æ›´å¤§çš„å›¾æ„å‘³ç€æ›´å¥½çš„æ£€ç´¢æ•ˆæœ
4. **åˆç†æ€§**: ä½ åŸæœ¬å°±æƒ³"ç”¨ pubmed_mirage_medqa ä¸­æ„å»ºçš„å›¾"

## ğŸ¯ æ¨èå‘½ä»¤

```bash
# ç»ˆæ­¢å½“å‰æµ‹è¯•å¹¶åˆ‡æ¢åˆ° 50k å›¾
cd /home/maoxy23/projects/LinearRAG
kill 3840200
rm -rf import/pubmed_mirage_medmcqa
ln -s pubmed_mirage_medqa import/pubmed_mirage_medmcqa
./run_medmcqa_use_50k.sh
```

è¿™æ ·å°±èƒ½ä½¿ç”¨ç°æœ‰çš„ 50k chunks å›¾è¿›è¡Œ MedMCQA æµ‹è¯•äº†ï¼
